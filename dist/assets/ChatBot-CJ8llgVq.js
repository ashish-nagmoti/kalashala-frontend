import{c as L,r as N,j as l}from"./index-BPVEKsek.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Y=L("LoaderCircle",Ce);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],ve=L("MicOff",_e);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Ie=L("Mic",ye);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Re=L("Send",be);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Ae=L("Volume2",Ne);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],we=L("VolumeX",Oe);var K;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(K||(K={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(P||(P={}));var q;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(q||(q={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V=["user","model","function","system"];var M;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(M||(M={}));var j;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(j||(j={}));var W;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(W||(W={}));var J;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(J||(J={}));var k;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(k||(k={}));var X;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(X||(X={}));var z;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(z||(z={}));var Q;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Q||(Q={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class T extends C{constructor(t,n){super(t),this.response=n}}class ce extends C{constructor(t,n,s,o){super(t),this.status=n,this.statusText=s,this.errorDetails=o}}class O extends C{}class le extends C{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se="https://generativelanguage.googleapis.com",xe="v1beta",Te="0.24.1",Me="genai-js";var S;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(S||(S={}));class je{constructor(t,n,s,o,i){this.model=t,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=i}toString(){var t,n;const s=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||xe;let i=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Se}/${s}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function Le(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Me}/${Te}`),t.join(" ")}async function De(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Le(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let s=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new O(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,i]of s.entries()){if(o==="x-goog-api-key")throw new O(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new O(`Header name ${o} can only be set using the apiClient field`);n.append(o,i)}}return n}async function ke(e,t,n,s,o,i){const a=new je(e,t,n,s,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},He(i)),{method:"POST",headers:await De(a),body:o})}}async function U(e,t,n,s,o,i={},a=fetch){const{url:r,fetchOptions:u}=await ke(e,t,n,s,o,i);return Ge(r,u,a)}async function Ge(e,t,n=fetch){let s;try{s=await n(e,t)}catch(o){$e(o,e)}return s.ok||await Ue(s,e),s}function $e(e,t){let n=e;throw n.name==="AbortError"?(n=new le(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof ce||e instanceof O||(n=new C(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function Ue(e,t){let n="",s;try{const o=await e.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new ce(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,s)}function He(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const n=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),H(e.candidates[0]))throw new T(`${A(e)}`,e);return Fe(e)}else if(e.promptFeedback)throw new T(`Text not available. ${A(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),H(e.candidates[0]))throw new T(`${A(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Z(e)[0]}else if(e.promptFeedback)throw new T(`Function call not available. ${A(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),H(e.candidates[0]))throw new T(`${A(e)}`,e);return Z(e)}else if(e.promptFeedback)throw new T(`Function call not available. ${A(e)}`,e)},e}function Fe(e){var t,n,s,o;const i=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const a of(o=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)a.text&&i.push(a.text),a.executableCode&&i.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&i.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function Z(e){var t,n,s,o;const i=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const a of(o=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)a.functionCall&&i.push(a.functionCall);if(i.length>0)return i}const Be=[k.RECITATION,k.SAFETY,k.LANGUAGE];function H(e){return!!e.finishReason&&Be.includes(e.finishReason)}function A(e){var t,n,s;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((s=e.candidates)===null||s===void 0)&&s[0]){const i=e.candidates[0];H(i)&&(o+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(o+=`: ${i.finishMessage}`))}return o}function G(e){return this instanceof G?(this.v=e,this):new G(e)}function Ye(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(e,t||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){s[h]&&(o[h]=function(g){return new Promise(function(E,R){i.push([h,g,E,R])>1||r(h,g)})})}function r(h,g){try{u(s[h](g))}catch(E){I(i[0][3],E)}}function u(h){h.value instanceof G?Promise.resolve(h.value.v).then(_,v):I(i[0][2],h)}function _(h){r("next",h)}function v(h){r("throw",h)}function I(h,g){h(g),i.shift(),i.length&&r(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Ke(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Ve(t),[s,o]=n.tee();return{stream:qe(s),response:Pe(o)}}async function Pe(e){const t=[],n=e.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return F(We(t));t.push(o)}}function qe(e){return Ye(this,arguments,function*(){const n=e.getReader();for(;;){const{value:s,done:o}=yield G(n.read());if(o)break;yield yield G(F(s))}})}function Ve(e){const t=e.getReader();return new ReadableStream({start(s){let o="";return i();function i(){return t.read().then(({value:a,done:r})=>{if(r){if(o.trim()){s.error(new C("Failed to parse stream"));return}s.close();return}o+=a;let u=o.match(ee),_;for(;u;){try{_=JSON.parse(u[1])}catch{s.error(new C(`Error parsing JSON response: "${u[1]}"`));return}s.enqueue(_),o=o.substring(u[0].length),u=o.match(ee)}return i()}).catch(a=>{let r=a;throw r.stack=a.stack,r.name==="AbortError"?r=new le("Request aborted when reading from the stream"):r=new C("Error reading from the stream"),r})}}})}function We(e){const t=e[e.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const s of e){if(s.candidates){let o=0;for(const i of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=i.citationMetadata,n.candidates[o].groundingMetadata=i.groundingMetadata,n.candidates[o].finishReason=i.finishReason,n.candidates[o].finishMessage=i.finishMessage,n.candidates[o].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[o].content||(n.candidates[o].content={role:i.content.role||"user",parts:[]});const a={};for(const r of i.content.parts)r.text&&(a.text=r.text),r.functionCall&&(a.functionCall=r.functionCall),r.executableCode&&(a.executableCode=r.executableCode),r.codeExecutionResult&&(a.codeExecutionResult=r.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[o].content.parts.push(a)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function de(e,t,n,s){const o=await U(t,S.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),s);return Ke(o)}async function ue(e,t,n,s){const i=await(await U(t,S.GENERATE_CONTENT,e,!1,JSON.stringify(n),s)).json();return{response:F(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function $(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return Je(t)}function Je(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const i of e)"functionResponse"in i?(n.parts.push(i),o=!0):(t.parts.push(i),s=!0);if(s&&o)throw new C("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new C("No content is provided for sending chat message.");return s?t:n}function Xe(e,t){var n;let s={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(n=t==null?void 0:t.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new O("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=e.contents}else if(o)s=Object.assign(Object.assign({},s),e.generateContentRequest);else{const i=$(e);s.contents=[i]}return{generateContentRequest:s}}function te(e){let t;return e.contents?t=e:t={contents:[$(e)]},e.systemInstruction&&(t.systemInstruction=fe(e.systemInstruction)),t}function ze(e){return typeof e=="string"||Array.isArray(e)?{content:$(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Qe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Ze(e){let t=!1;for(const n of e){const{role:s,parts:o}=n;if(!t&&s!=="user")throw new C(`First content should be with role 'user', got ${s}`);if(!V.includes(s))throw new C(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(V)}`);if(!Array.isArray(o))throw new C("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new C("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const r of o)for(const u of ne)u in r&&(i[u]+=1);const a=Qe[s];for(const r of ne)if(!a.includes(r)&&i[r]>0)throw new C(`Content with role '${s}' can't contain '${r}' part`);t=!0}}function se(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe="SILENT_ERROR";class et{constructor(t,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,s!=null&&s.history&&(Ze(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var s,o,i,a,r,u;await this._sendPromise;const _=$(t),v={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(r=this.params)===null||r===void 0?void 0:r.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,_]},I=Object.assign(Object.assign({},this._requestOptions),n);let h;return this._sendPromise=this._sendPromise.then(()=>ue(this._apiKey,this.model,v,I)).then(g=>{var E;if(se(g.response)){this._history.push(_);const R=Object.assign({parts:[],role:"model"},(E=g.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(R)}else{const R=A(g.response);R&&console.warn(`sendMessage() was unsuccessful. ${R}. Inspect response object for details.`)}h=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,h}async sendMessageStream(t,n={}){var s,o,i,a,r,u;await this._sendPromise;const _=$(t),v={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(r=this.params)===null||r===void 0?void 0:r.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,_]},I=Object.assign(Object.assign({},this._requestOptions),n),h=de(this._apiKey,this.model,v,I);return this._sendPromise=this._sendPromise.then(()=>h).catch(g=>{throw new Error(oe)}).then(g=>g.response).then(g=>{if(se(g)){this._history.push(_);const E=Object.assign({},g.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=A(g);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(g=>{g.message!==oe&&console.error(g)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tt(e,t,n,s){return(await U(t,S.COUNT_TOKENS,e,!1,JSON.stringify(n),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nt(e,t,n,s){return(await U(t,S.EMBED_CONTENT,e,!1,JSON.stringify(n),s)).json()}async function st(e,t,n,s){const o=n.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await U(t,S.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,n,s={}){this.apiKey=t,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=fe(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var s;const o=te(t),i=Object.assign(Object.assign({},this._requestOptions),n);return ue(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),i)}async generateContentStream(t,n={}){var s;const o=te(t),i=Object.assign(Object.assign({},this._requestOptions),n);return de(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),i)}startChat(t){var n;return new et(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const s=Xe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return tt(this.apiKey,this.model,s,o)}async embedContent(t,n={}){const s=ze(t),o=Object.assign(Object.assign({},this._requestOptions),n);return nt(this.apiKey,this.model,s,o)}async batchEmbedContents(t,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return st(this.apiKey,this.model,t,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new C("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ie(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,s){if(!t.name)throw new O("Cached content must contain a `name` field.");if(!t.model)throw new O("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const a of o)if(n!=null&&n[a]&&t[a]&&(n==null?void 0:n[a])!==t[a]){if(a==="model"){const r=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(r===u)continue}throw new O(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${t[a]})`)}const i=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new ie(this.apiKey,i,s)}}const ae=new ot("AIzaSyCq-H6E0eJBKOF66kthg51I-GOIWUVoyh8"),re=[{category:M.HARM_CATEGORY_HARASSMENT,threshold:j.BLOCK_MEDIUM_AND_ABOVE},{category:M.HARM_CATEGORY_HATE_SPEECH,threshold:j.BLOCK_MEDIUM_AND_ABOVE},{category:M.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:j.BLOCK_MEDIUM_AND_ABOVE},{category:M.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:j.BLOCK_MEDIUM_AND_ABOVE}],at=()=>{const[e,t]=N.useState([{id:1,text:"Hello! I'm your AI assistant. I can help you with information about government schemes for artisans, courses, and more. How can I help you today?",sender:"bot"}]),[n,s]=N.useState(""),[o,i]=N.useState(!1),[a,r]=N.useState(!1),[u,_]=N.useState("english"),[v,I]=N.useState(!1),h=N.useRef(null),g=[{value:"english",label:"English"},{value:"hindi",label:"Hindi"},{value:"marathi",label:"Marathi"},{value:"tamil",label:"Tamil"},{value:"bengali",label:"Bengali"},{value:"telugu",label:"Telugu"}];N.useEffect(()=>{var f;(f=h.current)==null||f.scrollIntoView({behavior:"smooth"})},[e]);const E=async f=>{try{const p=await fetch(`http://localhost:8000/blog/chatbot/context/?query=${encodeURIComponent(f)}`);if(!p.ok)throw new Error("Failed to fetch context data");return await p.json()}catch(p){return console.error("Error fetching context:",p),{schemes:[],courses:[],blogs:[]}}},R=(f,p)=>{let c="";const m=f.schemes||[];m.length>0?(c+=`Government Schemes Information from our database:
`,m.forEach(d=>{c+=`Scheme: ${d.title}
Description: ${d.description}
`,d.category&&(c+=`Category: ${d.category}
`),d.tags&&(c+=`Tags: ${d.tags}
`),c+=`
`})):c+=`Note: There are no government schemes in our database at the moment.

`;const w=f.courses||[];w.length>0?(c+=`Available Courses Information from our database:
`,w.forEach(d=>{c+=`Course: ${d.title}
Description: ${d.description}
`,d.price&&d.price!=="N/A"&&(c+=`Price: ${d.price}
`),d.is_free&&(c+=`This is a free course
`),d.duration&&d.duration!=="N/A"&&(c+=`Duration: ${d.duration}
`),d.tags&&(c+=`Tags: ${d.tags}
`),c+=`
`})):c+=`Note: There are no courses in our database at the moment.

`;const y=f.blogs||[];return y.length>0?(c+=`Blog Articles Information from our database:
`,y.forEach(d=>{c+=`Article: ${d.title}
Description: ${d.description}
`,d.summary&&(c+=`Summary: ${d.summary}
`),d.content&&(c+=`Content: ${d.content.substring(0,200)}...
`),d.tags&&(c+=`Tags: ${d.tags}
`),c+=`
`})):c+=`Note: There are no blog articles in our database at the moment.

`,c+=`IMPORTANT INSTRUCTION: You must ONLY answer based on the information provided above. If the information needed to answer the question is not in the provided data, state that you don't have that information in your database. Do not make up or infer information that is not explicitly provided in the context above.

`,console.log("Full context being sent to Gemini API:"),console.log(c),c},he=(f,p)=>{const c=u.toLowerCase();let m=`Question: ${f}

`;return p&&(m+=`Context: ${p}

`),c==="english"?m+="Please respond in English.":c==="hindi"?m+="कृपया हिंदी में जवाब दें।":c==="marathi"?m+="कृपया मराठी मध्ये उत्तर द्या.":c==="tamil"?m+="தயவுசெய்து தமிழில் பதிலளிக்கவும்.":c==="bengali"?m+="অনুগ্রহ করে বাংলায় উত্তর দিন।":c==="telugu"&&(m+="దయచేసి తెలుగులో సమాధానం ఇవ్వండి."),m},ge=async f=>{if(f.preventDefault(),n.trim()===""||v)return;const p={id:e.length+1,text:n,sender:"user"};t(c=>[...c,p]),s(""),I(!0);try{console.log("Fetching context data for query:",n);const c=await E(n),m=R(c,n);console.log("Context prepared:",m?"Context available":"No relevant context");const w=he(n,m);try{console.log("Trying with gemini-1.5-flash model");const b=(await ae.getGenerativeModel({model:"gemini-2.0-flash",safetySettings:re}).generateContent(w)).response.text();console.log("Received response from Gemini API (1.5-flash)");const x={id:e.length+2,text:b,sender:"bot"};t(D=>[...D,x]),a&&B(b)}catch(y){console.error("Gemini API Error with 1.5-flash:",y);try{console.log("Trying fallback to gemini-pro model");const x=(await ae.getGenerativeModel({model:"gemini-pro",safetySettings:re}).generateContent(w)).response.text();console.log("Received response from fallback Gemini API (gemini-pro)");const D={id:e.length+2,text:x,sender:"bot"};t(Ee=>[...Ee,D]),a&&B(x)}catch(d){console.error("Fallback API Error:",d);let b="I'm sorry, I encountered an error while generating a response.";y.message&&(y.message.includes("404")?b="Error: The model was not found. This may be due to using a model name that doesn't exist.":y.message.includes("403")?b="Error: The API key may be invalid or doesn't have permission to access this model.":y.message.includes("429")?b="The API usage limit has been reached. Please try again later.":b=`Error: ${y.message}`);const x={id:e.length+2,text:b,sender:"bot"};t(D=>[...D,x])}}}catch(c){console.error("General error in chat processing:",c);const m={id:e.length+2,text:"I'm sorry, something went wrong with the chat processing. Please try again.",sender:"bot"};t(w=>[...w,m])}finally{I(!1)}},pe=()=>{if(i(!o),!o)if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){const f=window.SpeechRecognition||window.webkitSpeechRecognition,p=new f;p.lang=u==="hindi"?"hi-IN":u==="marathi"?"mr-IN":"en-US",p.onresult=c=>{const m=c.results[0][0].transcript;s(m),i(!1)},p.onerror=c=>{console.error("Speech recognition error",c.error),i(!1)},p.onend=()=>{i(!1)},p.start()}else alert("Speech recognition is not supported in your browser"),i(!1)},me=()=>{r(!a)},B=f=>{if("speechSynthesis"in window){const p=new SpeechSynthesisUtterance;p.text=f,p.lang=u==="hindi"?"hi-IN":u==="marathi"?"mr-IN":"en-US",window.speechSynthesis.speak(p)}};return l.jsx("div",{className:"py-8",children:l.jsxs("div",{className:"container-custom max-w-4xl",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[l.jsxs("div",{className:"p-4 bg-gray-100 border-b flex justify-between items-center",children:[l.jsx("h1",{className:"text-xl font-bold",children:"AI Assistant"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("select",{value:u,onChange:f=>_(f.target.value),className:"text-sm p-2 border border-gray-300 rounded-md",children:g.map(f=>l.jsx("option",{value:f.value,children:f.label},f.value))}),l.jsx("button",{onClick:me,className:`p-2 rounded-full ${a?"bg-black text-white":"bg-gray-200"}`,"aria-label":a?"Disable text-to-speech":"Enable text-to-speech",children:a?l.jsx(Ae,{className:"w-5 h-5"}):l.jsx(we,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:"h-96 overflow-y-auto p-4",children:[e.map(f=>l.jsx("div",{className:`mb-4 flex ${f.sender==="user"?"justify-end":"justify-start"}`,children:l.jsx("div",{className:`max-w-3/4 p-3 rounded-lg ${f.sender==="user"?"bg-black text-white rounded-tr-none":"bg-gray-100 rounded-tl-none"}`,children:f.text})},f.id)),v&&l.jsx("div",{className:"flex justify-start mb-4",children:l.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg rounded-tl-none flex items-center space-x-2",children:[l.jsx(Y,{className:"w-4 h-4 animate-spin"}),l.jsx("span",{children:"Generating response..."})]})}),l.jsx("div",{ref:h})]}),l.jsxs("form",{onSubmit:ge,className:"p-4 border-t flex items-center",children:[l.jsx("button",{type:"button",onClick:pe,className:`p-2 rounded-full mr-2 ${o?"bg-red-500 text-white":"bg-gray-200"}`,"aria-label":o?"Stop recording":"Start recording",children:o?l.jsx(ve,{className:"w-5 h-5"}):l.jsx(Ie,{className:"w-5 h-5"})}),l.jsx("input",{type:"text",value:n,onChange:f=>s(f.target.value),placeholder:"Type your message...",className:"flex-1 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-black",disabled:v}),l.jsx("button",{type:"submit",className:"p-2 bg-black text-white rounded-full ml-2 disabled:opacity-50",disabled:n.trim()===""||v,"aria-label":"Send message",children:v?l.jsx(Y,{className:"w-5 h-5 animate-spin"}):l.jsx(Re,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:"mt-8 bg-white p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Frequently Asked Questions"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:"What government schemes are available for artisans?"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"There are several schemes including pension benefits, medical aid, marketing assistance, and financial support for tools and equipment."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:"How can I register for WhatsApp updates?"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Visit our WhatsApp Registration page and follow the simple steps to start receiving updates directly on WhatsApp."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:"What courses are available for traditional crafts?"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"We offer courses in pottery, handloom weaving, jewelry making, block printing, and traditional painting techniques."})]})]})]})]})})};export{at as default};
